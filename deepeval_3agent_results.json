{
  "timestamp": "2025-12-03T19:27:22.446205",
  "suites": {
    "personalization": {
      "suite": "personalization",
      "total": 15,
      "passed": 8,
      "failed": 7,
      "duration": 86.78695559501648,
      "results": [
        {
          "name": "PE1_context_extraction_hiking_cold",
          "test_type": "context_extraction",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.8,
              "success": true,
              "reason": "The score is 1.00 because the response directly addressed the input about hiking jackets for cold weather without any irrelevant statements.",
              "duration": 6.939772367477417
            }
          },
          "actual_output": "Extracted context: {'activity': 'hiking', 'weather': 'cold'}",
          "retrieval_context": [
            "Original query: hiking jacket for cold weather",
            "Extracted context fields:",
            "  - activity: hiking",
            "  - weather: cold"
          ]
        },
        {
          "name": "PE2_context_multi_attribute",
          "test_type": "context_extraction",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.8,
              "success": true,
              "reason": "The score is 1.00 because the response directly addressed the request for women's blue ski outfits under $500 without including any irrelevant information.",
              "duration": 10.173802852630615
            }
          },
          "actual_output": "Extracted context: {'activity': 'skiing', 'weather': 'unknown', 'gender': 'Women', 'budget_max': 500.0, 'colors_preferred': ['blue']}",
          "retrieval_context": [
            "Original query: women's blue ski outfit under $500",
            "Extracted context fields:",
            "  - activity: skiing",
            "  - weather: unknown",
            "  - gender: Women",
            "  - budget_max: 500.0",
            "  - colors_preferred: ['blue']"
          ]
        },
        {
          "name": "PE3_context_fit_style",
          "test_type": "context_extraction",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.75,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the request for a relaxed fit casual jacket for everyday wear without any irrelevant statements.",
              "duration": 6.9233667850494385
            }
          },
          "actual_output": "Extracted context: {'activity': 'casual', 'weather': 'unknown', 'style_preference': 'casual', 'fit_preference': 'relaxed'}",
          "retrieval_context": [
            "Original query: relaxed fit casual jacket for everyday wear",
            "Extracted context fields:",
            "  - activity: casual",
            "  - weather: unknown",
            "  - style_preference: casual",
            "  - fit_preference: relaxed"
          ]
        },
        {
          "name": "PE4_context_brand_feature",
          "test_type": "context_extraction",
          "metrics": {
            "answer_relevancy": {
              "score": 0.5,
              "threshold": 0.8,
              "success": false,
              "reason": "The score is 0.50 because the output fails to address key aspects of the NorthPeak waterproof parka, such as its suitability for mountaineering and relevant weather conditions. These omissions prevent a higher score, as they are critical to understanding the product's effectiveness in its intended use.",
              "duration": 6.546250104904175
            }
          },
          "actual_output": "Extracted context: {'activity': 'unknown', 'weather': 'unknown', 'style_preference': 'technical', 'brands_preferred': ['Northpeak']}",
          "retrieval_context": [
            "Original query: NorthPeak waterproof parka for mountaineering",
            "Extracted context fields:",
            "  - activity: unknown",
            "  - weather: unknown",
            "  - style_preference: technical",
            "  - brands_preferred: ['Northpeak']"
          ]
        },
        {
          "name": "PE5_context_summer_travel",
          "test_type": "context_extraction",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.75,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the request for a lightweight summer travel jacket that packs small, with no irrelevant statements present.",
              "duration": 4.9278740882873535
            }
          },
          "actual_output": "Extracted context: {'activity': 'travel', 'weather': 'warm'}",
          "retrieval_context": [
            "Original query: lightweight summer travel jacket that packs small",
            "Extracted context fields:",
            "  - activity: travel",
            "  - weather: warm"
          ]
        },
        {
          "name": "PE6_feedback_fit_tight",
          "test_type": "feedback_signal",
          "metrics": {
            "faithfulness": {
              "score": 0.5,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.50 because the actual output incorrectly describes the jacket as too loose, while the context clearly states it is too tight.",
              "duration": 5.883455753326416
            }
          },
          "actual_output": "Extracted signals: [{'type': 'fit_issue', 'value': 'too_tight'}, {'type': 'fit_issue', 'value': 'too_loose'}]",
          "retrieval_context": [
            "Original feedback: This jacket is too tight, I prefer a looser fit",
            "Extracted signals:",
            "  - type=fit_issue, value=too_tight",
            "  - type=fit_issue, value=too_loose"
          ]
        },
        {
          "name": "PE7_feedback_style_flashy",
          "test_type": "feedback_signal",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 4.751538038253784
            }
          },
          "actual_output": "Extracted signals: [{'type': 'avoid_style', 'value': 'bright_colors'}]",
          "retrieval_context": [
            "Original feedback: Too flashy and bright, I want something more subtle",
            "Extracted signals:",
            "  - type=avoid_style, value=bright_colors"
          ]
        },
        {
          "name": "PE8_feedback_price",
          "test_type": "feedback_signal",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 5.7764716148376465
            }
          },
          "actual_output": "Extracted signals: [{'type': 'budget', 'value': 'lower_budget'}]",
          "retrieval_context": [
            "Original feedback: This is way too expensive for what it offers",
            "Extracted signals:",
            "  - type=budget, value=lower_budget"
          ]
        },
        {
          "name": "PE9_feedback_positive",
          "test_type": "feedback_signal",
          "metrics": {
            "faithfulness": {
              "score": 1,
              "threshold": 0.8,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 3.5142786502838135
            }
          },
          "actual_output": "Extracted signals: []",
          "retrieval_context": [
            "Original feedback: Perfect fit and I love the blue color!",
            "No signals extracted"
          ]
        },
        {
          "name": "PE10_feedback_warmth",
          "test_type": "feedback_signal",
          "metrics": {
            "faithfulness": {
              "score": 1,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 2.294611930847168
            }
          },
          "actual_output": "Extracted signals: []",
          "retrieval_context": [
            "Original feedback: Not warm enough for real winter weather",
            "No signals extracted"
          ]
        },
        {
          "name": "PE11_memory_save_retrieve",
          "test_type": "memory_consistency",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.25,
              "threshold": 0.9,
              "success": false,
              "reason": "The score is 0.25 because while the relevant statement mentions 'Saved data' which implies saved preferences, the majority of the context fails to address the specific actions of saving or retrieving preferences, as highlighted by the irrelevancy reasons.",
              "duration": 4.068356990814209
            }
          },
          "actual_output": "Retrieved: {'sizing': {'fit': 'relaxed', 'shirt': 'M'}, 'preferences': {}, 'general': {'budget_max': 300}}",
          "retrieval_context": [
            "Test action: save_and_retrieve",
            "User ID(s): test_user_pe11",
            "Saved data: {'sizing': {'fit': 'relaxed', 'shirt': 'M'}, 'general': {'budget_max': 300}}",
            "Result: {'sizing': {'fit': 'relaxed', 'shirt': 'M'}, 'preferences': {}, 'general': {'budget_max': 300}}"
          ]
        },
        {
          "name": "PE12_memory_session_override",
          "test_type": "memory_consistency",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.0,
              "threshold": 0.9,
              "success": false,
              "reason": "The score is 0.00 because there are no relevant statements in the retrieval context that address the input about the priority of session override over permanent, as all provided reasons indicate a complete lack of relevant information.",
              "duration": 6.087225675582886
            }
          },
          "actual_output": "Effective preferences: {'sizing': {'fit': 'oversized'}, 'preferences': {}, 'general': {}}",
          "retrieval_context": [
            "Test action: session_override",
            "User ID(s): test_user_pe12",
            "Permanent data: {'sizing': {'fit': 'relaxed'}}",
            "Session data: {'sizing': {'fit': 'oversized'}}",
            "Result: {'sizing': {'fit': 'oversized'}, 'preferences': {}, 'general': {}}"
          ]
        },
        {
          "name": "PE13_memory_user_isolation",
          "test_type": "memory_consistency",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.2,
              "threshold": 0.95,
              "success": false,
              "reason": "The score is 0.20 because while the statement 'User A cannot see User B data' is directly relevant, the majority of the context is irrelevant, focusing on technical terms and user preferences that do not address the visibility issue.",
              "duration": 6.188775300979614
            }
          },
          "actual_output": "User A prefs: {'sizing': {'fit': 'slim'}, 'preferences': {}, 'general': {}}, User B prefs: {'sizing': {'fit': 'oversized'}, 'preferences': {}, 'general': {}}",
          "retrieval_context": [
            "Test action: user_isolation",
            "User ID(s): test_user_pe13_a",
            "Result: {'user_a': {'sizing': {'fit': 'slim'}, 'preferences': {}, 'general': {}}, 'user_b': {'sizing': {'fit': 'oversized'}, 'preferences': {}, 'general': {}}}"
          ]
        },
        {
          "name": "PE14_memory_returning_user",
          "test_type": "memory_consistency",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.6666666666666666,
              "threshold": 0.9,
              "success": false,
              "reason": "The score is 0.67 because while the relevant statement provides user identification details with 'User ID(s): test_user_pe14' and indicates that the user is not new with 'is_new': False, the irrelevancy stems from the lack of direct information on how to identify returning users, as noted in the statement 'Test action: returning_user'.",
              "duration": 7.446576356887817
            }
          },
          "actual_output": "is_new=False, preferences={'sizing': {'fit': 'classic'}, 'preferences': {}, 'general': {}}",
          "retrieval_context": [
            "Test action: returning_user",
            "User ID(s): test_user_pe14",
            "Result: {'is_new': False, 'preferences': {'sizing': {'fit': 'classic'}, 'preferences': {}, 'general': {}}}"
          ]
        },
        {
          "name": "PE15_memory_new_user",
          "test_type": "memory_consistency",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.0,
              "threshold": 0.9,
              "success": false,
              "reason": "The score is 0.00 because there are no relevant statements in the retrieval context that address the input about a default structure for new users, as all provided statements fail to explain or relate to the concept of a default structure.",
              "duration": 4.803672790527344
            }
          },
          "actual_output": "is_new=True, preferences={'sizing': {}, 'preferences': {}, 'general': {}}",
          "retrieval_context": [
            "Test action: new_user",
            "User ID(s): test_user_pe15_new",
            "Result: {'is_new': True, 'preferences': {'sizing': {}, 'preferences': {}, 'general': {}}}"
          ]
        }
      ]
    },
    "orchestrator": {
      "suite": "orchestrator",
      "total": 12,
      "passed": 4,
      "failed": 8,
      "duration": 45.051705837249756,
      "results": [
        {
          "name": "OE1_intent_styling_outfit",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the output included irrelevant statements that did not address the request for hiking outfit suggestions, such as 'Classified intent: styling', which adds no value to the inquiry.",
              "duration": 4.384594917297363
            }
          },
          "actual_output": "Classified intent: styling",
          "retrieval_context": [
            "Query: I need an outfit for hiking this weekend",
            "Classified intent: styling",
            "Classification method: Rule-based",
            "Keywords detected: STYLING: 'outfit'"
          ]
        },
        {
          "name": "OE2_intent_search_product",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the response completely fails to address the request for waterproof jackets under $300, providing no relevant information whatsoever.",
              "duration": 3.577974557876587
            }
          },
          "actual_output": "Classified intent: search",
          "retrieval_context": [
            "Query: Show me waterproof jackets under $300",
            "Classified intent: search",
            "Classification method: Rule-based",
            "No specific keywords - defaulted to PRODUCT_SEARCH"
          ]
        },
        {
          "name": "OE3_intent_comparison",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because the response directly addressed the comparison between NorthPeak and AlpineCo parkas without including any irrelevant information.",
              "duration": 3.000396728515625
            }
          },
          "actual_output": "Classified intent: comparison",
          "retrieval_context": [
            "Query: Compare NorthPeak vs AlpineCo parkas",
            "Classified intent: comparison",
            "Classification method: Rule-based",
            "Keywords detected: COMPARISON: 'compare', COMPARISON: 'vs'"
          ]
        },
        {
          "name": "OE4_intent_info",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the response fails to address the question about the brands carried, only providing a classification of intent without any relevant information.",
              "duration": 3.8090295791625977
            }
          },
          "actual_output": "Classified intent: info",
          "retrieval_context": [
            "Query: What brands do you carry?",
            "Classified intent: info",
            "Classification method: Rule-based",
            "Keywords detected: INFO: 'brands'"
          ]
        },
        {
          "name": "OE5_intent_styling_dress",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the output included irrelevant statements that did not address the request for dressing guidance for a ski trip.",
              "duration": 4.124245643615723
            }
          },
          "actual_output": "Classified intent: styling",
          "retrieval_context": [
            "Query: Help me dress for a ski trip next month",
            "Classified intent: styling",
            "Classification method: Rule-based",
            "Keywords detected: STYLING: 'dress', STYLING: 'help me dress'"
          ]
        },
        {
          "name": "OE6_intent_comparison_better",
          "test_type": "intent_classification",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the response fails to address the question about the suitability of jackets for rain, only mentioning a classification of intent without relevant details.",
              "duration": 3.4390883445739746
            }
          },
          "actual_output": "Classified intent: comparison",
          "retrieval_context": [
            "Query: Which jacket is better for rain - shell or parka?",
            "Classified intent: comparison",
            "Classification method: Rule-based",
            "Keywords detected: COMPARISON: 'better'"
          ]
        },
        {
          "name": "OE7_routing_styling",
          "test_type": "query_routing",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 4.383244752883911
            }
          },
          "actual_output": "Handler: _handle_styling_query, Intent: styling",
          "retrieval_context": [
            "Query: I need an outfit for camping",
            "Intent: styling",
            "Handler: _handle_styling_query",
            "Result summary:",
            "  - products: 4"
          ]
        },
        {
          "name": "OE8_routing_search",
          "test_type": "query_routing",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 4.081491470336914
            }
          },
          "actual_output": "Handler: _handle_search_query, Intent: search",
          "retrieval_context": [
            "Query: Find me insulated parkas",
            "Intent: search",
            "Handler: _handle_search_query",
            "Result summary:",
            "  - products: 3"
          ]
        },
        {
          "name": "OE9_routing_comparison",
          "test_type": "query_routing",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 4.631471872329712
            }
          },
          "actual_output": "Handler: _handle_comparison_query, Intent: comparison",
          "retrieval_context": [
            "Query: Compare the Summit Pro and Alpine Explorer",
            "Intent: comparison",
            "Handler: _handle_comparison_query",
            "Result summary:",
            "  - products: 3"
          ]
        },
        {
          "name": "OE10_routing_info",
          "test_type": "query_routing",
          "metrics": {},
          "error": "object of type 'NoneType' has no len()",
          "success": false
        },
        {
          "name": "OE11_filter_gender_price",
          "test_type": "filter_application",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.3333333333333333,
              "threshold": 0.95,
              "success": false,
              "reason": "The score is 0.33 because while there is a relevant statement about filters applied for women's jackets under $300, such as 'Filters applied: {'gender': 'Women', 'max_price': 300}', the majority of the context is irrelevant, with statements like 'Products before: 3' and 'Filter efficiency: 66.7% removed' providing no useful information.",
              "duration": 4.858591079711914
            }
          },
          "actual_output": "Filtered 3 -> 1 products",
          "retrieval_context": [
            "Filters applied: {'gender': 'Women', 'max_price': 300}",
            "Products before: 3",
            "Products after: 1",
            "Filter efficiency: 66.7% removed",
            "Sample results:",
            "  - TrailBlazer Light: $189.0, Women, TrailForge"
          ]
        },
        {
          "name": "OE12_filter_brand_season",
          "test_type": "filter_application",
          "metrics": {
            "contextual_relevancy": {
              "score": 0.16666666666666666,
              "threshold": 0.95,
              "success": false,
              "reason": "The score is 0.17 because while there is a relevant mention of 'Summit Pro Parka: $275.0, Men, NorthPeak', the majority of the context is irrelevant, stating 'Products before: 3' and 'Filter efficiency: 66.7% removed', which do not relate to NorthPeak winter parkas.",
              "duration": 4.445475101470947
            }
          },
          "actual_output": "Filtered 3 -> 1 products",
          "retrieval_context": [
            "Filters applied: {'brands': ['NorthPeak'], 'season': ['Winter']}",
            "Products before: 3",
            "Products after: 1",
            "Filter efficiency: 66.7% removed",
            "Sample results:",
            "  - Summit Pro Parka: $275.0, Men, NorthPeak"
          ]
        }
      ]
    },
    "visual": {
      "suite": "visual",
      "total": 10,
      "passed": 9,
      "failed": 1,
      "duration": 48.24823808670044,
      "results": [
        {
          "name": "VE1_format_single_product",
          "test_type": "format_selection",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the request to visualize a single product without any irrelevant statements.",
              "duration": 3.3031249046325684
            }
          },
          "actual_output": "Format selected: product_card for 1 products",
          "retrieval_context": [
            "Product count: 1",
            "Intent: search",
            "Selected format: product_card",
            "Format selection rules:",
            "  - 0 products: empty message",
            "  - 1 product: product_card",
            "  - 2-5 products: comparison_table",
            "  - 6+ products: feature_matrix + product_list",
            "  - comparison intent: always comparison_table",
            "Output preview: ### Summit Pro Parka\n**NorthPeak** | Outerwear > Parkas\n\n**Rating:** 4.6/5.0 \u2b50\u2b50\u2b50\u2b50\u00bd\n**Price:** $275.00\n\n**Gender:** Men | **Season:** Winter\n\n**Features:**\n- Waterproofing: Waterproof\n- Insulation: Ins..."
          ]
        },
        {
          "name": "VE2_format_few_products",
          "test_type": "format_selection",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the request to visualize 3 products without including any irrelevant statements.",
              "duration": 4.836383581161499
            }
          },
          "actual_output": "Format selected: comparison_table for 3 products",
          "retrieval_context": [
            "Product count: 3",
            "Intent: search",
            "Selected format: comparison_table",
            "Format selection rules:",
            "  - 0 products: empty message",
            "  - 1 product: product_card",
            "  - 2-5 products: comparison_table",
            "  - 6+ products: feature_matrix + product_list",
            "  - comparison intent: always comparison_table",
            "Output preview: | Attribute | Summit Pro Parka | Alpine Explorer | TrailBlazer Light |\n|-----------|------------|------------|------------|\n| **Brand** | NorthPeak | AlpineCo | TrailForge |\n| **Price Usd** | $275.00 ..."
          ]
        },
        {
          "name": "VE3_format_many_products",
          "test_type": "format_selection",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the request to visualize 8 products without any irrelevant statements.",
              "duration": 3.5552070140838623
            }
          },
          "actual_output": "Format selected: feature_matrix_and_list for 8 products",
          "retrieval_context": [
            "Product count: 8",
            "Intent: search",
            "Selected format: feature_matrix_and_list",
            "Format selection rules:",
            "  - 0 products: empty message",
            "  - 1 product: product_card",
            "  - 2-5 products: comparison_table",
            "  - 6+ products: feature_matrix + product_list",
            "  - comparison intent: always comparison_table",
            "Output preview: | Attribute | Summit Pro Parka | Alpine Explorer | TrailBlazer Light |\n|-----------|------------|------------|------------|\n| **Brand** | NorthPeak | AlpineCo | TrailForge |\n| **Price Usd** | $275.00 ..."
          ]
        },
        {
          "name": "VE4_format_comparison_intent",
          "test_type": "format_selection",
          "metrics": {
            "answer_relevancy": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because the response directly addresses the input about visualizing products with comparison intent without any irrelevant statements.",
              "duration": 3.5131733417510986
            }
          },
          "actual_output": "Format selected: comparison_table for 4 products",
          "retrieval_context": [
            "Product count: 4",
            "Intent: comparison",
            "Selected format: comparison_table",
            "Format selection rules:",
            "  - 0 products: empty message",
            "  - 1 product: product_card",
            "  - 2-5 products: comparison_table",
            "  - 6+ products: feature_matrix + product_list",
            "  - comparison intent: always comparison_table",
            "Output preview: | Attribute | Summit Pro Parka | Alpine Explorer | TrailBlazer Light |\n|-----------|------------|------------|------------|\n| **Brand** | NorthPeak | AlpineCo | TrailForge |\n| **Price Usd** | $275.00 ..."
          ]
        },
        {
          "name": "VE5_format_search_intent",
          "test_type": "format_selection",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.00 because the response focused on a specific format for displaying products, which does not relate to the broader concept of visualizing products with search intent.",
              "duration": 3.486858606338501
            }
          },
          "actual_output": "Format selected: feature_matrix_and_list for 6 products",
          "retrieval_context": [
            "Product count: 6",
            "Intent: search",
            "Selected format: feature_matrix_and_list",
            "Format selection rules:",
            "  - 0 products: empty message",
            "  - 1 product: product_card",
            "  - 2-5 products: comparison_table",
            "  - 6+ products: feature_matrix + product_list",
            "  - comparison intent: always comparison_table",
            "Output preview: | Attribute | Summit Pro Parka | Alpine Explorer | TrailBlazer Light |\n|-----------|------------|------------|------------|\n| **Brand** | NorthPeak | AlpineCo | TrailForge |\n| **Price Usd** | $275.00 ..."
          ]
        },
        {
          "name": "VE6_content_price_accuracy",
          "test_type": "content_quality",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.95,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 6.605370759963989
            }
          },
          "actual_output": "Visualization generated, 2 checks performed",
          "retrieval_context": [
            "Input products: 2",
            "  - Test Jacket A: $199.99, rating=N/A",
            "  - Test Jacket B: $299.99, rating=N/A",
            "Validation results:",
            "  [PASS] Price 199.99 present: Found",
            "  [PASS] Price 299.99 present: Found"
          ]
        },
        {
          "name": "VE7_content_rating_format",
          "test_type": "content_quality",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 4.930890798568726
            }
          },
          "actual_output": "Visualization generated, 2 checks performed",
          "retrieval_context": [
            "Input products: 2",
            "  - Test A: $0, rating=4.5",
            "  - Test B: $0, rating=3.0",
            "Validation results:",
            "  [PASS] Price None present: Found",
            "  [PASS] Price None present: Found"
          ]
        },
        {
          "name": "VE8_content_name_integrity",
          "test_type": "content_quality",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 5.883983612060547
            }
          },
          "actual_output": "Visualization generated, 2 checks performed",
          "retrieval_context": [
            "Input products: 2",
            "  - Alpine Explorer Pro Waterproof Shell Jacket: $0, rating=N/A",
            "  - Summit: $0, rating=N/A",
            "Validation results:",
            "  [FAIL] Price None present: Missing",
            "  [FAIL] Price None present: Missing"
          ]
        },
        {
          "name": "VE9_content_highlight_accuracy",
          "test_type": "content_quality",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 6.14927077293396
            }
          },
          "actual_output": "Visualization generated, 3 checks performed",
          "retrieval_context": [
            "Input products: 3",
            "  - A: $100, rating=4.0",
            "  - B: $200, rating=4.5",
            "  - C: $150, rating=3.5",
            "Validation results:",
            "  [PASS] Price 100 present: Found",
            "  [PASS] Price 200 present: Found",
            "  [PASS] Price 150 present: Found"
          ]
        },
        {
          "name": "VE10_content_feature_matrix_scoring",
          "test_type": "content_quality",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 5.746731996536255
            }
          },
          "actual_output": "Visualization generated, 2 checks performed",
          "retrieval_context": [
            "Input products: 2",
            "  - A: $250, rating=4.6",
            "  - B: $350, rating=4.2",
            "Validation results:",
            "  [PASS] Price 250 present: Found",
            "  [PASS] Price 350 present: Found"
          ]
        }
      ]
    },
    "e2e": {
      "suite": "e2e",
      "total": 8,
      "passed": 0,
      "failed": 8,
      "duration": 278.95346426963806,
      "results": [
        {
          "name": "E2E1_new_user_styling",
          "workflow": "new_user_styling",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.00 because the output included statements about workflow completion and validation that are completely unrelated to selecting an outfit for hiking in cold weather.",
              "duration": 4.357715368270874
            },
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.75,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 7.328655958175659
            },
            "contextual_relevancy": {
              "score": 0.2,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.20 because while the context mentions 'activity=hiking' and 'weather=cold', the majority of the statements, such as 'Workflow: new_user_styling' and 'Steps executed: 5', do not provide any relevant information about outfits for hiking in cold weather.",
              "duration": 5.042494773864746
            }
          },
          "actual_output": "Workflow 'new_user_styling' completed with 5 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "intent",
                "expected": "STYLING",
                "actual": "STYLING",
                "passed": true
              },
              {
                "key": "is_new_user",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "context_extracted",
                "expected": [
                  "hiking",
                  "cold"
                ],
                "actual": [
                  "hiking",
                  "cold"
                ],
                "passed": true
              },
              {
                "key": "products_returned",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "visualization_format",
                "expected": "comparison_table or product_list",
                "actual": "comparison_table or product_list",
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E2_returning_user_search",
          "workflow": "returning_user_search",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.00 because the output included statements about workflow completion and validation that are completely unrelated to jackets, failing to address the request.",
              "duration": 4.232727527618408
            },
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.75,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 6.280960321426392
            },
            "contextual_relevancy": {
              "score": 0.0,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.00 because there are no relevant statements in the retrieval context that pertain to jackets, as all provided statements discuss unrelated processes and workflows.",
              "duration": 3.738621234893799
            }
          },
          "actual_output": "Workflow 'returning_user_search' completed with 6 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "intent",
                "expected": "PRODUCT_SEARCH",
                "actual": "PRODUCT_SEARCH",
                "passed": true
              },
              {
                "key": "is_new_user",
                "expected": false,
                "actual": false,
                "passed": true
              },
              {
                "key": "preferences_applied",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "products_match_preferences",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E3_feedback_loop",
          "workflow": "feedback_loop",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.8,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 6.162655830383301
            },
            "contextual_relevancy": {
              "score": 0.3,
              "threshold": 0.8,
              "success": false,
              "reason": "The score is 0.30 because the retrieval context primarily discusses a workflow and process steps, such as 'Workflow: feedback_loop' and 'Steps executed: 5', which are irrelevant to the input about jacket fitting preferences. The only relevant statements, like 'fit_issue = too_tight' and 'Update user preferences (fit preference \u2192 looser)', are overshadowed by the unrelated context.",
              "duration": 5.974367141723633
            }
          },
          "actual_output": "Workflow 'feedback_loop' completed with 5 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "feedback_processed",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "signal_extracted",
                "expected": "fit_issue",
                "actual": "fit_issue",
                "passed": true
              },
              {
                "key": "preferences_updated",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "new_results_match_feedback",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E4_comparison_workflow",
          "workflow": "comparison",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.8,
              "success": false,
              "reason": "The score is 0.00 because the output included irrelevant statements that did not address the comparison of NorthPeak and AlpineCo parkas, such as 'Workflow comparison' and a validation statement that was unrelated to the specific products.",
              "duration": 4.158107280731201
            },
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.8,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 9.977196455001831
            }
          },
          "actual_output": "Workflow 'comparison' completed with 5 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "intent",
                "expected": "COMPARISON",
                "actual": "COMPARISON",
                "passed": true
              },
              {
                "key": "brands_found",
                "expected": [
                  "NorthPeak",
                  "AlpineCo"
                ],
                "actual": [
                  "NorthPeak",
                  "AlpineCo"
                ],
                "passed": true
              },
              {
                "key": "visualization_format",
                "expected": "comparison_table",
                "actual": "comparison_table",
                "passed": true
              },
              {
                "key": "highlights_present",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E5_session_override",
          "workflow": "session_override",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.85,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 7.441975355148315
            },
            "contextual_relevancy": {
              "score": 0.25,
              "threshold": 0.85,
              "success": false,
              "reason": "The score is 0.25 because while there are relevant statements like 'User requests session override: fit=oversized' and 'Current query uses oversized fit', the majority of the context is irrelevant, mentioning 'fit=slim' and discussing workflow processes that do not pertain to clothing.",
              "duration": 81.65592813491821
            }
          },
          "actual_output": "Workflow 'session_override' completed with 5 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "permanent_fit",
                "expected": "slim",
                "actual": "slim",
                "passed": true
              },
              {
                "key": "session_override_fit",
                "expected": "oversized",
                "actual": "oversized",
                "passed": true
              },
              {
                "key": "current_effective_fit",
                "expected": "oversized",
                "actual": "oversized",
                "passed": true
              },
              {
                "key": "override_not_persisted",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E6_multi_turn_conversation",
          "workflow": "multi_turn",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.00 because the output included statements about workflow completion and validation that did not address the cost constraint of under $200, making them irrelevant to the input.",
              "duration": 5.122991323471069
            },
            "contextual_relevancy": {
              "score": 0.125,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.12 because while the relevant statement 'Extract price constraint: $200' hints at a price limit, the majority of the context is irrelevant, discussing procedural steps and workflows that do not relate to the input about making something under $200.",
              "duration": 5.228330850601196
            }
          },
          "actual_output": "Workflow 'multi_turn' completed with 4 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "context_maintained",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "refinement_applied",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "all_results_under_200",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E7_budget_constraint",
          "workflow": "budget_constraint",
          "metrics": {
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.9,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 5.892246723175049
            },
            "contextual_relevancy": {
              "score": 0.25,
              "threshold": 0.9,
              "success": false,
              "reason": "The score is 0.25 because while there are relevant statements like 'Extract budget constraint: max_price=300' and 'Return only products <= $300 for winter', the majority of the context focuses on workflow processes that do not relate to winter jackets or their pricing.",
              "duration": 95.80496716499329
            }
          },
          "actual_output": "Workflow 'budget_constraint' completed with 4 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "budget_extracted",
                "expected": 300,
                "actual": 300,
                "passed": true
              },
              {
                "key": "season_extracted",
                "expected": "Winter",
                "actual": "Winter",
                "passed": true
              },
              {
                "key": "all_results_under_budget",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "all_results_winter",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        },
        {
          "name": "E2E8_cross_agent_data_flow",
          "workflow": "cross_agent",
          "metrics": {
            "answer_relevancy": {
              "score": 0.0,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.00 because the output included statements about workflow completion and validation that are completely unrelated to the task of picking an outfit for camping.",
              "duration": 4.440089225769043
            },
            "faithfulness": {
              "score": 1.0,
              "threshold": 0.75,
              "success": true,
              "reason": "The score is 1.00 because there are no contradictions present, indicating that the actual output aligns perfectly with the retrieval context.",
              "duration": 6.060732364654541
            },
            "contextual_relevancy": {
              "score": 0.1,
              "threshold": 0.75,
              "success": false,
              "reason": "The score is 0.10 because while the statement 'ProductSearch returns camping-appropriate products' is relevant, the majority of the context consists of procedural and technical details that do not assist in picking an outfit for camping.",
              "duration": 9.600161075592041
            }
          },
          "actual_output": "Workflow 'cross_agent' completed with 6 steps. Validation: PASS",
          "validation": {
            "passed": true,
            "checks": [
              {
                "key": "all_agents_called",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "data_flow_complete",
                "expected": true,
                "actual": true,
                "passed": true
              },
              {
                "key": "context_preserved",
                "expected": true,
                "actual": true,
                "passed": true
              }
            ]
          }
        }
      ]
    }
  },
  "summary": {
    "total_tests": 45,
    "total_passed": 21,
    "total_duration": 459.0407660007477
  }
}